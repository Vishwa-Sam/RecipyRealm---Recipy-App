<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-content">
            <!-- LEFT SECTION -->
            <div class="navbar-left">

                <!-- Mobile Toggle Button -->
                <button class="navbar-toggle"
                        (click)="onToggleMenu()">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a routerLink="/"
                   class="navbar-brand">RecipeRealm</a>
                <img src="assets/logo.png"
                     alt="Logo"
                     class="logo"
                     loading="lazy" />
                @if (!isMenuOpen) {
                <ul class="nav navbar-nav main-nav"
                    [class.collapse]="collapsed"
                    (window:resize)="collapsed = true">
                    @if (isAuthenticated()) {
                    <li routerLinkActive="active">
                        <a routerLink="/recipes">Recipes</a>
                    </li>
                    }
                    @if (isAuthenticated()) {
                    <li routerLinkActive="active">
                        <a routerLink="/shopping-list">Shopping List</a>
                    </li>
                    }
                    <li routerLinkActive="active">
                        <a routerLink="/landingpage">Home</a>
                    </li>
                </ul>
                }
            </div>

            <!-- CENTER SECTION -->
            <div class="navbar-center">
                @if (!isAuthenticated() ) {
                <li routerLinkActive="active">
                    <a routerLink="/about-us">About Us</a>
                </li>
                <li routerLinkActive="active">
                    <a routerLink="/community">Community</a>
                </li>
                <li routerLinkActive="active">
                    <a routerLink="/blog">Blog</a>
                </li>
                }
                @if (isAuthenticated() && !isMenuOpen) {
                <div class="search-container">
                    <input type="text"
                           placeholder="Search recipes..."
                           class="search-input"
                           [(ngModel)]="searchInput"
                           (ngModelChange)="onSearch($event)" />
                    <button *ngIf="searchInput"
                            class="clear-btn"
                            (click)="clearSearch()">âœ–</button>
                    <button class="search-btn"
                            (click)="onSearch(searchInput)">
                        <i class="bi bi-search"></i>
                    </button>
                </div>
                }
            </div>

            <!-- RIGHT SECTION -->
            <div class="navbar-right">
                @if (!isAuthenticated()) {
                <li routerLinkActive="active">
                    <button (click)="onclick()"
                            class="login">Culinary Portal</button>
                </li>
                }
                @if (isAuthenticated()) {
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a style="cursor: pointer;"
                           (click)="onLogout()"
                           *ngIf="!isMenuOpen"
                           class="main-nav">Log-out<img src="../../assets/Landing-page/icons/log-out.svg"
                                 alt="icon"
                                 style="padding-left: 5px;"
                                 class="log-icon"></a>
                    </li>

                    <li class="dropdown"
                        appDropdownDirective>
                        <a style="cursor: pointer;"
                           class="dropdown-toggle"
                           role="button">
                            CookBook <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a style="cursor: pointer;"
                                   (click)="onSaveData()">Save Recipes</a>
                            </li>
                            <li>
                                <a style="cursor: pointer;"
                                   (click)="onFetchData()">Get Recipes</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                }
            </div>
        </div>

        <!-- BLUR OVERLAY FOR SIDEBAR -->
        @if (isMenuOpen) {
        <div class="blur-overlay"
             (click)="onToggleMenu()">
        </div>
        }
    </div>

    <!-- SIDEBAR FOR MOBILE VIEW -->
    @if (isMenuOpen) {
    <div class="mobile-sidebar">
        <h3 class="sidebar-title">Realm Navigator<img src="../../assets/Landing-page/icons/navigation.svg"
                 alt="icon"
                 class="icon-bubble"></h3>
        <button class="close-btn"
                (click)="onCloseMenu()">
            <svg width="18"
                 height="18"
                 viewBox="0 0 24 24"
                 fill="none"
                 stroke="currentColor"
                 stroke-width="3"
                 stroke-linecap="round"
                 stroke-linejoin="round">
                <circle cx="12"
                        cy="12"
                        r="10"></circle>
                <line x1="15"
                      y1="9"
                      x2="9"
                      y2="15"></line>
                <line x1="9"
                      y1="9"
                      x2="15"
                      y2="15"></line>
            </svg>
        </button>
        <ul>
            <li><a routerLink="/landingpage"
                   (click)="onToggleMenu()">Home</a>
                <img src="../../assets/Landing-page/icons/house.svg"
                     alt="icon"
                     class="icon-bubble"
                     style="margin-left: 10px;">
            </li>

            @if (isAuthenticated()) {
            <li><a routerLink="/recipes"
                   (click)="onToggleMenu()">Recipes</a> <img src="../../assets/Landing-page/icons/cooking-pot.svg"
                     alt="icon"
                     class="icon-bubble"
                     style="margin-left: 10px;"></li>
            <li><a routerLink="/shopping-list"
                   (click)="onToggleMenu()">Shopping List</a> <img
                     src="../../assets/Landing-page/icons/shopping-cart.svg"
                     alt="icon"
                     class="icon-bubble"
                     style="margin-left: 10px;"></li>
            <li><a (click)="onLogout()">Logout</a> <img src="../../assets/Landing-page/icons/log-out.svg"
                     alt="icon"
                     class="icon-bubble"
                     style="margin-left: 10px;"></li>
            } @else {
            <li><a routerLink="/about-us"
                   (click)="onToggleMenu()">About Us</a> <img src="../../assets/Landing-page/icons/notepad-text.svg"
                     alt="icon"
                     class="icon-bubble"
                     style="margin-left: 10px;"></li>
            <li><a routerLink="/community"
                   (click)="onToggleMenu()">Community</a> <img src="../../assets/Landing-page/icons/heart-handshake.svg"
                     alt="icon"
                     class="icon-bubble"
                     style="margin-left: 10px;"></li>
            <li><a routerLink="/blog"
                   (click)="onToggleMenu()">Blog</a> <img src="../../assets/Landing-page/icons/newspaper.svg"
                     alt="icon"
                     class="icon-bubble"
                     style="margin-left: 10px;"></li>
            }
        </ul>
    </div>
    }
</nav>